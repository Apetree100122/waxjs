<!DOCTYPE html>
<html>
<script src='waxjs.js'></script>

<body>

<h1>wax signing lib example.</h1>

<p>this is a library test.</p>

<p>Click the buttons</p>

<button id="login" onclick=login() >WAX Login</button>
<button id="sign" onclick=sign() >Sign transaction</button>

<h2 id="response"></h2>


<p id="demo"></p>


<script>
  const wax = new waxjs.WaxJS('http://shared.wax.io', 'https://history.waxprotocol.com');

  let userName;
  let eosApi;

  async function login() {
    let { userAccount, api } = await wax.login();
    userName = userAccount;
    eosApi = api;
    document.getElementById('response').append(userAccount);
  }

  async function sign() {
    const result = await eosApi.transact({
      actions: [{
        account: 'eosio.token',
        name: 'transfer',
        authorization: [{
          actor: userName,
          permission: 'active',
        }],
        data: {
          from: userName,
          to: 'nv2qm.waa',
          quantity: '1.00000000 WAX',
          memo: '',
        },
      }]
    }, {
      blocksBehind: 3,
      expireSeconds: 30
    });

    document.getElementById('response').append(JSON.stringify(result))
  }

</script>
</body>
</html>
